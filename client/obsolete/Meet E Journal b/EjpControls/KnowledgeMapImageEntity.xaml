<src:KnowledgeMapEntityBase x:Class="SiliconStudio.Meet.EjpControls.KnowledgeMapImageEntity"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:src="clr-namespace:SiliconStudio.Meet.EjpControls"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Height="250" Width="200">
    
    <src:KnowledgeMapEntityBase.Resources>

        <DrawingBrush x:Key="AnchorPointBrush">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <DrawingGroup.Children>
                        <GeometryDrawing Brush="#D2CCCCCD" Geometry="F1 M 0,64.668C 0,28.952 28.9547,0 64.6693,0C 100.384,0 129.339,28.952 129.339,64.668C 129.339,100.384 100.384,129.337 64.6693,129.337C 28.9547,129.337 0,100.384 0,64.668 Z "/>
                        <GeometryDrawing Geometry="F1 M 76.0793,61.7162C 75.0593,62.7363 73.4047,62.7376 72.3846,61.7176L 67.0327,56.363C 66.0113,55.343 66.0113,53.6883 67.0327,52.6683L 83.234,36.4656C 84.2553,35.4456 85.91,35.4456 86.9313,36.4656L 92.282,41.819C 93.3033,42.8389 93.302,44.4936 92.282,45.5136L 76.0793,61.7162 Z M 100.801,39.779L 88.97,27.9483C 87.3007,26.2803 84.598,26.2803 82.93,27.9496L 58.514,52.363C 56.846,54.0309 56.846,56.7349 58.514,58.4043L 70.3446,70.2349C 72.0127,71.9016 74.718,71.903 76.3846,70.2349L 100.801,45.819C 102.467,44.1509 102.467,41.447 100.801,39.779 Z ">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="1.33333" LineJoin="Round" Brush="#D2C6C7C8"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 45.1575,92.6382C 44.1361,93.6582 42.4841,93.6582 41.4641,92.6382L 36.1108,87.2835C 35.0894,86.2635 35.0894,84.6102 36.1108,83.5901L 52.3134,67.3875C 53.3348,66.3675 54.9881,66.3661 56.0094,67.3875L 61.3615,72.7395C 62.3828,73.7608 62.3815,75.4141 61.3601,76.4355L 45.1575,92.6382 Z M 69.8788,70.6995L 58.0481,58.8688C 56.3815,57.2008 53.6761,57.2021 52.0068,58.8715L 27.5935,83.2835C 25.9255,84.9528 25.9241,87.6568 27.5921,89.3248L 39.4228,101.155C 41.0908,102.823 43.7961,102.823 45.4641,101.155L 69.8788,76.7408C 71.5454,75.0728 71.5468,72.3675 69.8788,70.6995 Z ">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="1.33333" LineJoin="Round" Brush="#D2C6C7C8"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                        <GeometryDrawing Brush="#FFF8F9F9" Geometry="M 76.0793,61.7162C 75.0593,62.7363 73.4047,62.7376 72.3846,61.7176L 67.0327,56.363C 66.0113,55.343 66.0113,53.6883 67.0327,52.6683L 83.234,36.4656C 84.2553,35.4456 85.91,35.4456 86.9313,36.4656L 92.282,41.819C 93.3033,42.8389 93.302,44.4936 92.282,45.5136M 100.801,39.779L 88.97,27.9483C 87.3007,26.2803 84.598,26.2803 82.93,27.9496L 58.514,52.363C 56.846,54.0309 56.846,56.7349 58.514,58.4043L 70.3446,70.2349C 72.0127,71.9016 74.718,71.903 76.3846,70.2349L 100.801,45.819C 102.467,44.1509 102.467,41.447 100.801,39.779 Z "/>
                        <GeometryDrawing Brush="#FFF8F9F9" Geometry="F1 M 45.1575,92.6382C 44.1361,93.6582 42.4841,93.6582 41.4641,92.6382L 36.1108,87.2835C 35.0894,86.2635 35.0894,84.6102 36.1108,83.5901L 52.3134,67.3875C 53.3348,66.3675 54.9881,66.3661 56.0094,67.3875L 61.3615,72.7395C 62.3828,73.7608 62.3815,75.4141 61.3601,76.4355M 69.8788,70.6995L 58.0481,58.8688C 56.3815,57.2008 53.6761,57.2021 52.0068,58.8715L 27.5935,83.2835C 25.9255,84.9528 25.9241,87.6568 27.5921,89.3248L 39.4228,101.155C 41.0908,102.823 43.7961,102.823 45.4641,101.155L 69.8788,76.7408C 71.5454,75.0728 71.5468,72.3675 69.8788,70.6995 Z "/>
                        <GeometryDrawing Brush="#FFF8F9F9" Geometry="F1 M 72.651,60.112L 68.1657,55.628C 67.5324,54.9933 66.507,54.9933 65.8737,55.628L 54.9177,66.5827C 54.2871,67.216 54.2871,68.2401 54.9204,68.872L 59.4044,73.3587C 60.0391,73.992 61.0644,73.992 61.6937,73.36L 72.651,62.404C 73.2844,61.7707 73.2857,60.7467 72.651,60.112 Z ">
                            <GeometryDrawing.Pen>
                                <Pen LineJoin="Round" Brush="#FFC6C7C8"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                    </DrawingGroup.Children>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>
        
        <DrawingBrush x:Key="CommentIcon">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <DrawingGroup.Children>
                        <GeometryDrawing Geometry="F1 M 402.059,304.733L 390.913,304.733L 376.39,331.438L 365.986,304.733L 293.052,304.733C 272.834,304.733 256.444,285.761 256.444,262.358L 256.444,193.931C 256.444,170.528 272.834,151.556 293.052,151.556L 402.059,151.556C 422.277,151.556 438.667,170.528 438.667,193.931L 438.667,262.358C 438.667,285.761 422.277,304.733 402.059,304.733 Z ">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="5" LineJoin="Round" Brush="#FF2AB7D1"/>
                            </GeometryDrawing.Pen>
                            <GeometryDrawing.Brush>
                                <LinearGradientBrush StartPoint="0.5,-0.0174626" EndPoint="0.5,1.13109">
                                    <LinearGradientBrush.GradientStops>
                                        <GradientStop Color="#FF058198" Offset="0"/>
                                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                                    </LinearGradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </GeometryDrawing.Brush>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 295.667,164.547L 398.667,164.547C 415.235,164.547 428.667,177.979 428.667,194.547L 428.667,199.556C 428.667,216.124 415.235,229.556 398.667,229.556L 295.667,229.556C 279.098,229.556 265.667,216.124 265.667,199.556L 265.667,194.547C 265.667,177.979 279.098,164.547 295.667,164.547 Z ">
                            <GeometryDrawing.Brush>
                                <LinearGradientBrush StartPoint="0.5,1.73016" EndPoint="0.5,-0.730161">
                                    <LinearGradientBrush.GradientStops>
                                        <GradientStop Color="#27FFFFFF" Offset="0"/>
                                        <GradientStop Color="#27FFFFFF" Offset="1"/>
                                    </LinearGradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </GeometryDrawing.Brush>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 295.667,239.66L 398.667,239.66C 415.235,239.66 428.667,253.091 428.667,269.66L 428.667,274.668C 428.667,291.237 415.235,304.668 398.667,304.668L 295.667,304.668C 279.098,304.668 265.667,291.237 265.667,274.668L 265.667,269.66C 265.667,253.091 279.098,239.66 295.667,239.66 Z ">
                            <GeometryDrawing.Brush>
                                <LinearGradientBrush StartPoint="0.5,-0.73016" EndPoint="0.5,1.73016">
                                    <LinearGradientBrush.GradientStops>
                                        <GradientStop Color="#27FFFFFF" Offset="0"/>
                                        <GradientStop Color="#27FFFFFF" Offset="1"/>
                                    </LinearGradientBrush.GradientStops>
                                </LinearGradientBrush>
                            </GeometryDrawing.Brush>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 280.556,190L 410.778,190">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="10" LineJoin="Round" Brush="#FF307AA0"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 280.556,234L 410.778,234">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="10" LineJoin="Round" Brush="#FF307AA0"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 280.556,274.445L 410.778,274.445">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="10" LineJoin="Round" Brush="#FF307AA0"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                    </DrawingGroup.Children>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>

    </src:KnowledgeMapEntityBase.Resources>
    
    <Grid x:Name="RootGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="13"/>
            <RowDefinition Height="25"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="13"/>
        </Grid.RowDefinitions>

        <Rectangle x:Name="_r_TitleRectangle" Fill="{x:Null}" Stroke="{x:Null}" RadiusX="7.5" 
	                RadiusY="7.5" Margin="0,0,0,0" Grid.RowSpan="4"/>
        <Rectangle x:Name="_r_BodyRectangle" Fill="White" Stroke="{x:Null}" Grid.Row="1"
                    Margin="8,1,8,3" HorizontalAlignment="Right" Width="56" RadiusX="3" RadiusY="3"/>
        <Rectangle x:Name="_r_TopStripRectangle" Fill="#80000000" Stroke="{x:Null}" Grid.Row="0"
		        	Height="4" Margin="0,2,0,0"/>
        <Rectangle x:Name="_r_BottomStripRectangle" Fill="#80000000" Stroke="{x:Null}" Grid.Row="3"
			        Height="4" Margin="0,0,0,2"/>
        
        <Image Stretch="Uniform" x:Name="_I_ImageArea" Margin="8,1,8,0" Grid.Row="2" />
        
        <Rectangle x:Name="_E_LinkAnchor" Fill="{StaticResource CommentIcon}" Stroke="{x:Null}" 
               HorizontalAlignment="Right" Margin="0,0,28,0" VerticalAlignment="Center" 
               Width="15" Height="15" Grid.Row="1" MouseLeftButtonUp="ShowCommentNote"/>
        
        <Grid Width="15" HorizontalAlignment="Right" Margin="0,0,10,0" 
			VerticalAlignment="Center" Height="15" Grid.Row="1">
            <Rectangle x:Name="_E_Expander" MouseLeftButtonUp="OnToggleExpanded" Stroke="#FF000000" Margin="0">
                <Rectangle.Fill>
                    <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1">
                        <GradientStop Color="#FFB2D0E4" Offset="0"/>
                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                        <GradientStop Color="#FFFFFFFF" Offset="0.582"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
            <Rectangle x:Name="_E_ExpanderBar" Height="2" VerticalAlignment="Bottom" Margin="3,2,3,2" Fill="#FF000000" />
        </Grid>
        
        <Grid Width="15" HorizontalAlignment="Right" Margin="0,0,46,0" 
			VerticalAlignment="Center" Height="15" Grid.Row="1">
            <Rectangle x:Name="_E_Ref" MouseLeftButtonUp="OnNavigateReference" Stroke="#FF000000" Margin="0">
                <Rectangle.Fill>
                    <LinearGradientBrush EndPoint="0.5,0" StartPoint="0.5,1">
                        <GradientStop Color="#FFB2D0E4" Offset="0"/>
                        <GradientStop Color="#FFFFFFFF" Offset="1"/>
                        <GradientStop Color="#FFFFFFFF" Offset="0.582"/>
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
            <Ellipse Fill="{x:Null}" Stroke="#FF000000" StrokeThickness="1.5" Margin="3,3,3,3"/>
        </Grid>

        <TextBox MaxLines="1" x:Name="_TB_TitleArea" Margin="8,0,67,3" Padding="5,0,0,0" 
               VerticalContentAlignment="Center" Text="TextBox" TextWrapping="Wrap" Grid.Row="1"/>

        <!--AnchorPoints-->
        <Ellipse Visibility="Collapsed" Width="10" x:Name="_eap_UpperMiddle" StrokeThickness="0" Height="10" Fill="#FFFF9F00" HorizontalAlignment="Center" VerticalAlignment="Top"/>
        <Ellipse Visibility="Collapsed" x:Name="_eap_LowerMiddle" StrokeThickness="0" Height="10" Fill="#FFFF9F00" HorizontalAlignment="Center" Margin="87,0,87,0" VerticalAlignment="Bottom" Width="10"/>
        <Ellipse Visibility="Collapsed" x:Name="_eap_MiddleLeft" StrokeThickness="0" Height="10" Fill="#FFFF9F00" HorizontalAlignment="Left" Margin="0,0,0,0" VerticalAlignment="Center" Width="10"/>
        <Ellipse Visibility="Collapsed" Width="10" x:Name="_eap_MiddleRight" StrokeThickness="0" Height="10" Fill="#FFFF9F00" HorizontalAlignment="Right" VerticalAlignment="Center"/>

    </Grid>
</src:KnowledgeMapEntityBase>
